<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>fetch로 JSONPlaceholder API 호출하기</title>
  </head>
  <body>
    <h1>fetch로 JSONPlaceholder API 호출하기</h1>

    <script>
      async function getPost() {
        try {
          // 1. fetch 호출 (응답이 올 때 까지 기다림)
          const response = await fetch(
            "https://jsonplaceholder.typicode.com/posts/1"
          );

          // 2. response.ok 확인
          if (!response.ok) {
            // 실패 시 에러를 던져 catch 블록으로 보냄
            throw new Error(`HTTP 에러 발생! 상태코드 : ${response.status}`);
          }

          // 3. JSON 데이터 파싱 (파싱이 완료될 때까지 기다림)
          const data = await response.json();

          //   // 브라우저 화면 (body)에 직접 테스트를 넣는 코드 추가
          //   document.body.innerHTML = `
          //   <h1>${data.title}</h1>
          //   <p>${data.body}</p>
          //   `;

          // 4. 성공 데이터 출력
          console.log("성공 데이터:", data);
        } catch (error) {
          console.error("에러 발생:", error.message);

          //   document.body.innerHTML = `<p style= "color:red;">에러: ${error.message}</p>`;
        }
      }

      getPost();

      //   4. 존재하지 않는 URL (예: /posts/9999)로 에러 케이스 테스트
      async function getPost1() {
        try {
          // 1. fetch 호출 (응답이 올 때 까지 기다림)
          const response = await fetch(
            "https://jsonplaceholder.typicode.com/posts/9999"
          );

          // 2. response.ok 확인
          if (!response.ok) {
            // 실패 시 에러를 던져 catch 블록으로 보냄
            throw new Error(`HTTP 에러 발생! 상태코드 : ${response.status}`);
          }

          // 3. JSON 데이터 파싱 (파싱이 완료될 때까지 기다림)
          const data = await response.json();

          // 4. 성공 데이터 출력
          console.log("성공 데이터:", data);
        } catch (error) {
          console.error("에러 발생:", error.message);
        }
      }

      getPost1();
    </script>
  </body>
</html>
